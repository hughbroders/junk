---
title: "Setting up for git"
author: "Broders"
date: "2023-11-14"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

#for a new project.  
```{r set the working directory}
setwd("/Users/hughbroders/documents/junk")
getwd()
```

#usethis package to initialize the git.  Could also just select the git repo option on the new project- new directory-new project option

```{r}
library(usethis)
use_git_config(user.name = "hughbroders", user.email = "hugh.broders@uwaterloo.ca")
use_git()
```

#just adding some committ testing junk some morejhgjhgjhgjhjh


againb

junk jghjhgjkgkugkgggugkh

#for a new project 
```{r set the working directory}
setwd("/Users/hughbroders/documents/junk")
getwd()
```

## Lets load some data and mess around


```{r bring in the csv file}
amnh_all<-read.table("/Users/hughbroders/documents/research/belize/1-data/amnh_full_datasheet/amnh8_24oct2023.csv", stringsAsFactors=FALSE, sep=",",header=T)
```

```{r seleect columns we need for pit work}
amnh<-amnh_all[,c("pit_number", "record_number","capture_number","genus","species","sex", "country","district","specific_location","net_site","method","lat", "long","expedition","ymd","time","repro_status","age")]
```

##For summary, lets create a genus species column
```{r make a new column of genus species}
amnh$genusspecies<-paste(amnh$genus,amnh$species,sep=" ")
```


#Lets subset out only the pit tagged animals from the AMNH capture database.  We use the grep function to include all rows that have a value in the pit_number colum that begins with 9.  Note that if we want only the 989 sized pit tags we would simply replace 9 with 989, etc. Here though we simply want all the captures that have pit tags

```{r subset out the pits}
amnhpits<-amnh[grep("9",amnh$pit_number),]
```


## Now lets get the first, second, third, fourth, etc capture records
```{r subset out different capture numbers}
amnhpits_capture1<-subset(amnhpits,capture_number==0)
amnhpits_capture2<-subset(amnhpits,capture_number==1) 
amnhpits_capture3<-subset(amnhpits,capture_number==2)
amnhpits_capture4<-subset(amnhpits,capture_number==3)
amnhpits_capture5<-subset(amnhpits,capture_number==4)
amnhpits_capture6<-subset(amnhpits,capture_number==5)
amnhpits_allrecaps<-subset(amnhpits,capture_number>0)

should_be_zero<-nrow(amnhpits)-nrow(amnhpits_capture1)-nrow(amnhpits_capture2)-nrow(amnhpits_capture3)-nrow(amnhpits_capture4)-nrow(amnhpits_capture5)-nrow(amnhpits_capture6)
should_be_zero

Should_also_be_zero<-nrow(amnhpits_allrecaps)-nrow(amnhpits_capture2)-nrow(amnhpits_capture3)-nrow(amnhpits_capture4)-nrow(amnhpits_capture5)-nrow(amnhpits_capture6)
Should_also_be_zero
```


#Table 1: The number of individual bats that we have for each capture_number.  0 is the first capture, 1 is second, etc

```{r}
table1<-table(amnhpits$genusspecies,amnhpits$capture_number)
table1<-addmargins(table1)
table1
```

##Table 2:  Look at the number of bats by species captured each trip down

```{r}
table2<-table(amnhpits$genusspecies,amnhpits$expedition)
```

##Table 3:  Look at the age of bats at the first capture 

```{r}
table3<-table(amnhpits_capture1$genusspecies,amnhpits_capture1$age)
table3<-addmargins(table3)
table3
```


